<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau Senior 2526 - Gestion d'Équipe</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .tab-button {
            padding: 15px 25px;
            border: none;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
        }

        .tab-button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .tab-button.active {
            background: white;
            color: #667eea;
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .section-title {
            font-size: 2em;
            color: #333;
            font-weight: 700;
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .data-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            font-weight: 600;
            text-align: left;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background 0.3s ease;
        }

        .data-table tr:hover td {
            background: #f8f9ff;
        }

        .data-table tr:nth-child(even) {
            background: #f9f9f9;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .presence-grid {
            display: grid;
            grid-template-columns: 200px repeat(auto-fit, minmax(100px, 1fr));
            gap: 1px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .presence-cell {
            background: white;
            padding: 10px;
            text-align: center;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .presence-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }

        .presence-name {
            background: #f8f9ff;
            font-weight: 600;
            text-align: left;
            padding-left: 15px;
        }

        .presence-present {
            background: #d4edda;
            color: #155724;
        }

        .presence-absent {
            background: #f8d7da;
            color: #721c24;
        }

        .presence-repos {
            background: #fff3cd;
            color: #856404;
        }

        .export-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            color: #000;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .tab-button {
                width: 100%;
            }

            .charts-container {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .presence-grid {
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚽ Tableau Senior 2526</h1>
            <p>Système de Gestion d'Équipe de Football</p>
        </div>

        <div class="nav-tabs">
            <button class="tab-button active" onclick="showTab('refus')">🚫 Refus</button>
            <button class="tab-button" onclick="showTab('detections')">🔍 Détections</button>
            <button class="tab-button" onclick="showTab('effectif')">👥 Effectif Infos</button>
            <button class="tab-button" onclick="showTab('liste40')">📋 Liste 40</button>
            <button class="tab-button" onclick="showTab('equipements')">👕 Équipements</button>
            <button class="tab-button" onclick="showTab('presence1')">📅 Présence Août-Déc</button>
            <button class="tab-button" onclick="showTab('presence2')">📅 Présence Jan-Mai</button>
            <button class="tab-button" onclick="showTab('totalpresence')">📊 Total Présence</button>
            <button class="tab-button" onclick="showTab('buteurs')">⚽ Buteurs</button>
            <button class="tab-button" onclick="showTab('matchs')">🏆 10 Matchs R1</button>
        </div>

        <!-- Onglet Refus -->
        <div id="refus" class="tab-content active">
            <div class="section-header">
                <h2 class="section-title">🚫 Joueurs Refusés</h2>
                <button class="btn btn-primary" onclick="addRefus()">➕ Ajouter un refus</button>
            </div>
            
            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="refus-count">0</div>
                    <div class="stat-label">Joueurs Refusés</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="refus-by-position">0</div>
                    <div class="stat-label">Positions Différentes</div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">Répartition par Poste</div>
                    <canvas id="refusPositionChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Répartition par Ville</div>
                    <canvas id="refusVilleChart"></canvas>
                </div>
            </div>

            <table class="data-table" id="refusTable">
                <thead>
                    <tr>
                        <th>NOM</th>
                        <th>Prénom</th>
                        <th>Téléphone</th>
                        <th>Naissance</th>
                        <th>Club N-1</th>
                        <th>Poste 1</th>
                        <th>Poste 2</th>
                        <th>Ville d'habitation</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Onglet Détections -->
        <div id="detections" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">🔍 Détections</h2>
                <button class="btn btn-primary" onclick="addDetection()">➕ Ajouter une détection</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="detection-count">0</div>
                    <div class="stat-label">Détections</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="detection-licences">0</div>
                    <div class="stat-label">Licences à valider</div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">Status des Licences</div>
                    <canvas id="detectionLicenceChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Répartition Droitier/Gaucher</div>
                    <canvas id="detectionPiedChart"></canvas>
                </div>
            </div>

            <table class="data-table" id="detectionTable">
                <thead>
                    <tr>
                        <th>NOM</th>
                        <th>Prénom</th>
                        <th>Téléphone</th>
                        <th>Naissance</th>
                        <th>Club N-1</th>
                        <th>Poste 1</th>
                        <th>Poste 2</th>
                        <th>D/G</th>
                        <th>Ville</th>
                        <th>Infos</th>
                        <th>Go licence</th>
                        <th>Payer avant</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Onglet Effectif Infos -->
        <div id="effectif" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">👥 Effectif Complet</h2>
                <button class="btn btn-primary" onclick="addEffectif()">➕ Ajouter un joueur</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="effectif-count">0</div>
                    <div class="stat-label">Joueurs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="effectif-licences">0</div>
                    <div class="stat-label">Licences Validées</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="effectif-paiements">0</div>
                    <div class="stat-label">Paiements OK</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="effectif-equipements">0</div>
                    <div class="stat-label">Équipements</div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">Status des Dossiers</div>
                    <canvas id="effectifDossierChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Répartition par Département</div>
                    <canvas id="effectifDeptChart"></canvas>
                </div>
            </div>

            <table class="data-table" id="effectifTable">
                <thead>
                    <tr>
                        <th>N°</th>
                        <th>NOM</th>
                        <th>Prénom</th>
                        <th>Téléphone</th>
                        <th>Naissance</th>
                        <th>Club N-1</th>
                        <th>Poste 1</th>
                        <th>Poste 2</th>
                        <th>D/G</th>
                        <th>Ville</th>
                        <th>Postal</th>
                        <th>Travail</th>
                        <th>Vacances</th>
                        <th>Dossier</th>
                        <th>Conditions</th>
                        <th>Paiement</th>
                        <th>Équipements</th>
                        <th>N° Équip</th>
                        <th>Projection</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Onglet Liste 40 -->
        <div id="liste40" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">📋 Liste Officielle 40 Joueurs</h2>
                <button class="btn btn-primary" onclick="addListe40()">➕ Ajouter à la liste</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="liste40-principale">0</div>
                    <div class="stat-label">Liste Principale</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="liste40-complementaire">0</div>
                    <div class="stat-label">Liste Complémentaire</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <div>
                    <h3 style="text-align: center; margin-bottom: 20px; color: #667eea;">📋 Liste R1 / D1 : 38 joueurs + 2 gardiens</h3>
                    <table class="data-table" id="liste40Principale">
                        <thead>
                            <tr>
                                <th>N°</th>
                                <th>NOM</th>
                                <th>PRÉNOM</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div>
                    <h3 style="text-align: center; margin-bottom: 20px; color: #764ba2;">📋 Liste Complémentaire</h3>
                    <table class="data-table" id="liste40Complementaire">
                        <thead>
                            <tr>
                                <th>N°</th>
                                <th>NOM</th>
                                <th>PRÉNOM</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Onglet Équipements -->
        <div id="equipements" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">👕 Gestion des Équipements</h2>
                <button class="btn btn-primary" onclick="addEquipement()">➕ Ajouter équipement</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="equip-count">0</div>
                    <div class="stat-label">Joueurs Équipés</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="equip-commande1">0</div>
                    <div class="stat-label">Commande 1</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="equip-commande2">0</div>
                    <div class="stat-label">Commande 2</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="equip-photos">0</div>
                    <div class="stat-label">Photos à faire</div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">Répartition des Tailles</div>
                    <canvas id="equipTailleChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Status des Commandes</div>
                    <canvas id="equipCommandeChart"></canvas>
                </div>
            </div>

            <table class="data-table" id="equipementTable">
                <thead>
                    <tr>
                        <th>N°</th>
                        <th>NOM</th>
                        <th>PRÉNOM</th>
                        <th>Survet</th>
                        <th>Pointure</th>
                        <th>Training</th>
                        <th>Coupe vent</th>
                        <th>Maillot/short</th>
                        <th>s/Maillot</th>
                        <th>Maillot</th>
                        <th>Polo</th>
                        <th>Sac</th>
                        <th>Flocage</th>
                        <th>Commande 1</th>
                        <th>Commande 2</th>
                        <th>Photos</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Onglet Présence 1 -->
        <div id="presence1" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">📅 Feuille de Présence (Août - Décembre 2024)</h2>
                <button class="btn btn-primary" onclick="addPresence1()">➕ Nouvelle session</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="presence1-sessions">0</div>
                    <div class="stat-label">Sessions Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="presence1-avg">0%</div>
                    <div class="stat-label">Taux Présence Moyen</div>
                </div>
            </div>

            <div class="export-controls">
                <button class="btn btn-secondary" onclick="exportPresence1()">📊 Exporter Excel</button>
                <button class="btn btn-success" onclick="analyzePresence1()">📈 Analyser Présences</button>
            </div>

            <div id="presence1Grid" class="presence-grid">
                <!-- Sera généré dynamiquement -->
            </div>
        </div>

        <!-- Onglet Présence 2 -->
        <div id="presence2" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">📅 Feuille de Présence (Janvier - Mai 2025)</h2>
                <button class="btn btn-primary" onclick="addPresence2()">➕ Nouvelle session</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="presence2-sessions">0</div>
                    <div class="stat-label">Sessions Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="presence2-avg">0%</div>
                    <div class="stat-label">Taux Présence Moyen</div>
                </div>
            </div>

            <div class="export-controls">
                <button class="btn btn-secondary" onclick="exportPresence2()">📊 Exporter Excel</button>
                <button class="btn btn-success" onclick="analyzePresence2()">📈 Analyser Présences</button>
            </div>

            <div id="presence2Grid" class="presence-grid">
                <!-- Sera généré dynamiquement -->
            </div>
        </div>

        <!-- Onglet Total Présence -->
        <div id="totalpresence" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">📊 Résumé Total des Présences</h2>
                <button class="btn btn-primary" onclick="calculateTotalPresence()">🔄 Calculer</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="total-players">0</div>
                    <div class="stat-label">Joueurs Actifs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-sessions">0</div>
                    <div class="stat-label">Sessions d'Entraînement</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-attendance">0%</div>
                    <div class="stat-label">Taux Global</div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">Top 10 Présences</div>
                    <canvas id="totalPresenceChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Évolution Mensuelle</div>
                    <canvas id="totalEvolutionChart"></canvas>
                </div>
            </div>

            <table class="data-table" id="totalPresenceTable">
                <thead>
                    <tr>
                        <th>Rang</th>
                        <th>PRÉNOM</th>
                        <th>NOM</th>
                        <th>Présences Entraînements</th>
                        <th>Pourcentage</th>
                        <th>Évolution</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Onglet Buteurs -->
        <div id="buteurs" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">⚽ Statistiques des Buteurs</h2>
                <button class="btn btn-primary" onclick="addButeur()">➕ Ajouter but</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="buteurs-total">0</div>
                    <div class="stat-label">Total Buts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="buteurs-r1">0</div>
                    <div class="stat-label">R1 + Coupe Rég</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="buteurs-d1">0</div>
                    <div class="stat-label">D1 + Coupe Dép</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="buteurs-prepa">0</div>
                    <div class="stat-label">Préparation</div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">Top Buteurs</div>
                    <canvas id="buteursChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Répartition par Compétition</div>
                    <canvas id="buteursCompetChart"></canvas>
                </div>
            </div>

            <table class="data-table" id="buteursTable">
                <thead>
                    <tr>
                        <th>Rang</th>
                        <th>NOM</th>
                        <th>Prénom</th>
                        <th>R1 + Coupe Rég</th>
                        <th>D1 + Coupe Dép</th>
                        <th>Préparation</th>
                        <th>TOTAL Buts</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- Onglet 10 Matchs R1 -->
        <div id="matchs" class="tab-content">
            <div class="section-header">
                <h2 class="section-title">🏆 Statistiques 10 Matchs R1</h2>
                <button class="btn btn-primary" onclick="addMatch()">➕ Ajouter participation</button>
            </div>

            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="matchs-joueurs">0</div>
                    <div class="stat-label">Joueurs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="matchs-r1">0</div>
                    <div class="stat-label">Matchs R1</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="matchs-coupes">0</div>
                    <div class="stat-label">Matchs Coupes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="matchs-gen">0</div>
                    <div class="stat-label">Total Général</div>
                </div>
            </div>

            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">Participation par Compétition</div>
                    <canvas id="matchsParticipationChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Top Participants</div>
                    <canvas id="matchsTopChart"></canvas>
                </div>
            </div>

            <table class="data-table" id="matchsTable">
                <thead>
                    <tr>
                        <th>Rang</th>
                        <th>PRÉNOM</th>
                        <th>NOM</th>
                        <th>R1</th>
                        <th>CDF</th>
                        <th>CDP</th>
                        <th>CDD</th>
                        <th>GÉNÉRAL</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Modal pour les formulaires -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Variables globales pour stocker les données
        let refusData = [];
        let detectionsData = [];
        let effectifData = [];
        let liste40Data = [];
        let equipementsData = [];
        let presence1Data = [];
        let presence2Data = [];
        let totalPresenceData = [];
        let buteursData = [];
        let matchsData = [];

        // Fonction pour afficher les onglets
        function showTab(tabName) {
            // Masquer tous les onglets
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            // Masquer tous les boutons actifs
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });

            // Afficher l'onglet sélectionné
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Charger les données pour l'onglet
            loadTabData(tabName);
        }

        // Fonction pour charger les données d'un onglet
        function loadTabData(tabName) {
            switch(tabName) {
                case 'refus':
                    updateRefusStats();
                    renderRefusTable();
                    updateRefusCharts();
                    break;
                case 'detections':
                    updateDetectionStats();
                    renderDetectionTable();
                    updateDetectionCharts();
                    break;
                case 'effectif':
                    updateEffectifStats();
                    renderEffectifTable();
                    updateEffectifCharts();
                    break;
                case 'liste40':
                    updateListe40Stats();
                    renderListe40Tables();
                    break;
                case 'equipements':
                    updateEquipementStats();
                    renderEquipementTable();
                    updateEquipementCharts();
                    break;
                case 'presence1':
                    updatePresence1Stats();
                    renderPresence1Grid();
                    break;
                case 'presence2':
                    updatePresence2Stats();
                    renderPresence2Grid();
                    break;
                case 'totalpresence':
                    updateTotalPresenceStats();
                    renderTotalPresenceTable();
                    updateTotalPresenceCharts();
                    break;
                case 'buteurs':
                    updateButeursStats();
                    renderButeursTable();
                    updateButeursCharts();
                    break;
                case 'matchs':
                    updateMatchsStats();
                    renderMatchsTable();
                    updateMatchsCharts();
                    break;
            }
        }

        // Fonctions pour les statistiques et rendus (à implémenter)
        function updateRefusStats() {
            document.getElementById('refus-count').textContent = refusData.length;
            const positions = [...new Set(refusData.map(r => r.poste1).filter(p => p))];
            document.getElementById('refus-by-position').textContent = positions.length;
        }

        function renderRefusTable() {
            const tbody = document.querySelector('#refusTable tbody');
            tbody.innerHTML = '';
            
            refusData.forEach((refus, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${refus.nom || ''}</td>
                    <td>${refus.prenom || ''}</td>
                    <td>${refus.telephone || ''}</td>
                    <td>${refus.naissance || ''}</td>
                    <td>${refus.clubN1 || ''}</td>
                    <td>${refus.poste1 || ''}</td>
                    <td>${refus.poste2 || ''}</td>
                    <td>${refus.ville || ''}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="editRefus(${index})">✏️</button>
                        <button class="btn btn-danger" onclick="deleteRefus(${index})">🗑️</button>
                    </td>
                `;
            });
        }

        function updateRefusCharts() {
            // Graphique des postes
            const positionData = {};
            refusData.forEach(r => {
                if (r.poste1) {
                    positionData[r.poste1] = (positionData[r.poste1] || 0) + 1;
                }
            });

            const ctx1 = document.getElementById('refusPositionChart').getContext('2d');
            new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(positionData),
                    datasets: [{
                        data: Object.values(positionData),
                        backgroundColor: [
                            '#667eea', '#764ba2', '#f093fb', '#f5576c',
                            '#4facfe', '#00f2fe', '#43e97b', '#38f9d7'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Graphique des villes
            const villeData = {};
            refusData.forEach(r => {
                if (r.ville) {
                    villeData[r.ville] = (villeData[r.ville] || 0) + 1;
                }
            });

            const ctx2 = document.getElementById('refusVilleChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: Object.keys(villeData),
                    datasets: [{
                        label: 'Nombre de refus',
                        data: Object.values(villeData),
                        backgroundColor: '#667eea'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Fonctions pour ajouter/modifier/supprimer (à implémenter pour chaque section)
        function addRefus() {
            showModal(`
                <h2>➕ Ajouter un Refus</h2>
                <form onsubmit="saveRefus(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>NOM:</label>
                            <input type="text" name="nom" required>
                        </div>
                        <div class="form-group">
                            <label>Prénom:</label>
                            <input type="text" name="prenom" required>
                        </div>
                        <div class="form-group">
                            <label>Téléphone:</label>
                            <input type="tel" name="telephone">
                        </div>
                        <div class="form-group">
                            <label>Naissance:</label>
                            <input type="date" name="naissance">
                        </div>
                        <div class="form-group">
                            <label>Club N-1:</label>
                            <input type="text" name="clubN1">
                        </div>
                        <div class="form-group">
                            <label>Poste 1:</label>
                            <select name="poste1">
                                <option value="">Sélectionner...</option>
                                <option value="Gardien">Gardien</option>
                                <option value="Def C">Défenseur Central</option>
                                <option value="Lat droit">Latéral Droit</option>
                                <option value="Lat gauche">Latéral Gauche</option>
                                <option value="Milieu">Milieu</option>
                                <option value="Mil def">Milieu Défensif</option>
                                <option value="Mil off">Milieu Offensif</option>
                                <option value="Ailier droit">Ailier Droit</option>
                                <option value="Ailier gauche">Ailier Gauche</option>
                                <option value="Attaquant">Attaquant</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Poste 2:</label>
                            <select name="poste2">
                                <option value="">Sélectionner...</option>
                                <option value="Gardien">Gardien</option>
                                <option value="Def C">Défenseur Central</option>
                                <option value="Lat droit">Latéral Droit</option>
                                <option value="Lat gauche">Latéral Gauche</option>
                                <option value="Milieu">Milieu</option>
                                <option value="Mil def">Milieu Défensif</option>
                                <option value="Mil off">Milieu Offensif</option>
                                <option value="Ailier droit">Ailier Droit</option>
                                <option value="Ailier gauche">Ailier Gauche</option>
                                <option value="Attaquant">Attaquant</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ville d'habitation:</label>
                            <input type="text" name="ville">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">💾 Enregistrer</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">❌ Annuler</button>
                </form>
            `);
        }

        function saveRefus(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const refus = {
                nom: formData.get('nom'),
                prenom: formData.get('prenom'),
                telephone: formData.get('telephone'),
                naissance: formData.get('naissance'),
                clubN1: formData.get('clubN1'),
                poste1: formData.get('poste1'),
                poste2: formData.get('poste2'),
                ville: formData.get('ville')
            };
            
            refusData.push(refus);
            loadTabData('refus');
            closeModal();
        }

        function editRefus(index) {
            const refus = refusData[index];
            showModal(`
                <h2>✏️ Modifier un Refus</h2>
                <form onsubmit="updateRefus(event, ${index})">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>NOM:</label>
                            <input type="text" name="nom" value="${refus.nom || ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Prénom:</label>
                            <input type="text" name="prenom" value="${refus.prenom || ''}" required>
                        </div>
                        <div class="form-group">
                            <label>Téléphone:</label>
                            <input type="tel" name="telephone" value="${refus.telephone || ''}">
                        </div>
                        <div class="form-group">
                            <label>Naissance:</label>
                            <input type="date" name="naissance" value="${refus.naissance || ''}">
                        </div>
                        <div class="form-group">
                            <label>Club N-1:</label>
                            <input type="text" name="clubN1" value="${refus.clubN1 || ''}">
                        </div>
                        <div class="form-group">
                            <label>Poste 1:</label>
                            <select name="poste1">
                                <option value="">Sélectionner...</option>
                                <option value="Gardien" ${refus.poste1 === 'Gardien' ? 'selected' : ''}>Gardien</option>
                                <option value="Def C" ${refus.poste1 === 'Def C' ? 'selected' : ''}>Défenseur Central</option>
                                <option value="Lat droit" ${refus.poste1 === 'Lat droit' ? 'selected' : ''}>Latéral Droit</option>
                                <option value="Lat gauche" ${refus.poste1 === 'Lat gauche' ? 'selected' : ''}>Latéral Gauche</option>
                                <option value="Milieu" ${refus.poste1 === 'Milieu' ? 'selected' : ''}>Milieu</option>
                                <option value="Mil def" ${refus.poste1 === 'Mil def' ? 'selected' : ''}>Milieu Défensif</option>
                                <option value="Mil off" ${refus.poste1 === 'Mil off' ? 'selected' : ''}>Milieu Offensif</option>
                                <option value="Ailier droit" ${refus.poste1 === 'Ailier droit' ? 'selected' : ''}>Ailier Droit</option>
                                <option value="Ailier gauche" ${refus.poste1 === 'Ailier gauche' ? 'selected' : ''}>Ailier Gauche</option>
                                <option value="Attaquant" ${refus.poste1 === 'Attaquant' ? 'selected' : ''}>Attaquant</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Poste 2:</label>
                            <select name="poste2">
                                <option value="">Sélectionner...</option>
                                <option value="Gardien" ${refus.poste2 === 'Gardien' ? 'selected' : ''}>Gardien</option>
                                <option value="Def C" ${refus.poste2 === 'Def C' ? 'selected' : ''}>Défenseur Central</option>
                                <option value="Lat droit" ${refus.poste2 === 'Lat droit' ? 'selected' : ''}>Latéral Droit</option>
                                <option value="Lat gauche" ${refus.poste2 === 'Lat gauche' ? 'selected' : ''}>Latéral Gauche</option>
                                <option value="Milieu" ${refus.poste2 === 'Milieu' ? 'selected' : ''}>Milieu</option>
                                <option value="Mil def" ${refus.poste2 === 'Mil def' ? 'selected' : ''}>Milieu Défensif</option>
                                <option value="Mil off" ${refus.poste2 === 'Mil off' ? 'selected' : ''}>Milieu Offensif</option>
                                <option value="Ailier droit" ${refus.poste2 === 'Ailier droit' ? 'selected' : ''}>Ailier Droit</option>
                                <option value="Ailier gauche" ${refus.poste2 === 'Ailier gauche' ? 'selected' : ''}>Ailier Gauche</option>
                                <option value="Attaquant" ${refus.poste2 === 'Attaquant' ? 'selected' : ''}>Attaquant</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ville d'habitation:</label>
                            <input type="text" name="ville" value="${refus.ville || ''}">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">💾 Enregistrer</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">❌ Annuler</button>
                </form>
            `);
        }

        function updateRefus(event, index) {
            event.preventDefault();
            const formData = new FormData(event.target);
            refusData[index] = {
                nom: formData.get('nom'),
                prenom: formData.get('prenom'),
                telephone: formData.get('telephone'),
                naissance: formData.get('naissance'),
                clubN1: formData.get('clubN1'),
                poste1: formData.get('poste1'),
                poste2: formData.get('poste2'),
                ville: formData.get('ville')
            };
            
            loadTabData('refus');
            closeModal();
        }

        function deleteRefus(index) {
            if (confirm('Êtes-vous sûr de vouloir supprimer ce refus ?')) {
                refusData.splice(index, 1);
                loadTabData('refus');
            }
        }

        // Fonctions similaires pour les autres sections (à implémenter)
        function addDetection() { /* À implémenter */ }
        function addEffectif() { /* À implémenter */ }
        function addListe40() { /* À implémenter */ }
        function addEquipement() { /* À implémenter */ }
        function addPresence1() { /* À implémenter */ }
        function addPresence2() { /* À implémenter */ }
        function addButeur() { /* À implémenter */ }
        function addMatch() { /* À implémenter */ }

        // Fonctions des autres onglets (stubs pour l'instant)
        function updateDetectionStats() { /* À implémenter */ }
        function renderDetectionTable() { /* À implémenter */ }
        function updateDetectionCharts() { /* À implémenter */ }
        
        function updateEffectifStats() { /* À implémenter */ }
        function renderEffectifTable() { /* À implémenter */ }
        function updateEffectifCharts() { /* À implémenter */ }
        
        function updateListe40Stats() { /* À implémenter */ }
        function renderListe40Tables() { /* À implémenter */ }
        
        function updateEquipementStats() { /* À implémenter */ }
        function renderEquipementTable() { /* À implémenter */ }
        function updateEquipementCharts() { /* À implémenter */ }
        
        function updatePresence1Stats() { /* À implémenter */ }
        function renderPresence1Grid() { /* À implémenter */ }
        
        function updatePresence2Stats() { /* À implémenter */ }
        function renderPresence2Grid() { /* À implémenter */ }
        
        function updateTotalPresenceStats() { /* À implémenter */ }
        function renderTotalPresenceTable() { /* À implémenter */ }
        function updateTotalPresenceCharts() { /* À implémenter */ }
        
        function updateButeursStats() { /* À implémenter */ }
        function renderButeursTable() { /* À implémenter */ }
        function updateButeursCharts() { /* À implémenter */ }
        
        function updateMatchsStats() { /* À implémenter */ }
        function renderMatchsTable() { /* À implémenter */ }
        function updateMatchsCharts() { /* À implémenter */ }

        // Fonctions pour la modal
        function showModal(content) {
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('modal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        // Fermer la modal en cliquant à l'extérieur
        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // Fonctions d'export et d'analyse (stubs)
        function exportPresence1() { /* À implémenter */ }
        function analyzePresence1() { /* À implémenter */ }
        function exportPresence2() { /* À implémenter */ }
        function analyzePresence2() { /* À implémenter */ }
        function calculateTotalPresence() { /* À implémenter */ }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            loadTabData('refus');
        });
    </script>
</body>
</html>
